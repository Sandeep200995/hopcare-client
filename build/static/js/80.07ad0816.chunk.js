"use strict";(self.webpackChunkhopcare_cl=self.webpackChunkhopcare_cl||[]).push([[80],{80:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var a=s(4165),n=s(5861),r=s(2506),o=s(2791),u=s(7689),c=s(5830),p=s(453),i=s(2522),l=s(3494),d=s(9434),m=s(3155),h=s(5568),f=s(184);var v=function(){var e=(0,u.s0)(),t=(0,u.TH)(),s=(0,d.I0)(),v=o.useContext(m.Vo).setIsAuthenticated,b=o.useContext(m.tc).setIsAppLoader,T=(0,d.v9)((function(e){return e.userData})),y=(0,r.TA)({initialValues:{phoneNumber:"",userType:"consumer",otp:"",password:""},validateOnBlur:!0,validateOnChange:!1,validate:function(e){var t={};return e.otp||(t.otp="Please enter otp"),t},onSubmit:function(){var t=(0,n.Z)((0,a.Z)().mark((function t(s){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Values ",s),b(!0),n={phoneNumber:s.phoneNumber,otp:s.otp.toString(),userType:s.userType},t.prev=3,t.next=6,p.$O(n);case 6:r=t.sent,console.log("response on OTP :::",r),b(!1),r.data&&200===r.status&&r.data.message?((0,h.Am)(r.data.message,{position:"top-center"}),c.t.storeData(c.t.keys.TOKEN_CL,r.data.accessToken),c.t.storeData(c.t.keys.USER_TYPE,r.data.userType),v(!0),x(r.data),e("/",{replace:!0}),b(!1)):r.data&&r.data.message&&(0,h.Am)(T.message,{position:"top-center"}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),b(!1),(0,h.Am)(T.message,{position:"top-center"});case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()});function x(e){return k.apply(this,arguments)}function k(){return(k=(0,n.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),s(i.r3({formData:{userId:t.userId,userType:t.userType},token:t.accessToken}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,n.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={phoneNumber:y.values.phoneNumber,password:y.values.password,userType:y.values.userType},b(!0),e.prev=2,e.next=5,p.tj(t);case 5:(s=e.sent).data.user_details&&200===s.status&&(y.setFieldValue("otp",s.data.user_details.otp),(0,h.Am)(s.data.message,{position:"top-center"})),b(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),b(!1),(0,h.Am)("Failed to sent request",{position:"top-center"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){t&&t.state&&t.state.otp&&(y.setFieldValue("otp",t.state.otp),y.setFieldValue("phoneNumber",t.state.phoneNumber),y.setFieldValue("userType",t.state.userType),y.setFieldValue("password",t.state.password))}),[t]),(0,o.useEffect)((function(){switch(T.case){case l.Vx:b(!1);break;case l.Bw:b(!1),(0,h.Am)(T.message,{position:"top-center"})}}),[T.case]),(0,o.useEffect)((function(){switch(console.log("userState",T),T.case){case l.P0:b(!1),e("/",{replace:!0}),c.t.storeData(c.t.keys.TOKEN_CL,T.userDetails.accessToken),c.t.storeData(c.t.keys.USER_TYPE,T.userDetails.userType);break;case l.ej:b(!1),(0,h.Am)(T.message,{position:"top-center"})}}),[T.case]),(0,f.jsxs)("div",{className:"form-area",children:[(0,f.jsx)("h2",{children:"OTP "}),(0,f.jsx)("form",{onSubmit:y.handleSubmit,noValidate:!0,children:(0,f.jsxs)("div",{className:"form-inner",children:[(0,f.jsxs)("div",{className:"form-input",children:[(0,f.jsx)("input",{type:"number",placeholder:"OTP",name:"otp",maxLength:4,onChange:y.handleChange,value:y.values.otp}),y.errors.otp&&(0,f.jsx)("p",{className:"error-text",children:y.errors.otp})]}),(0,f.jsxs)("button",{type:"button",className:"btn-underline",onClick:function(){return function(){return g.apply(this,arguments)}()},children:["Resend OTP"," "]}),(0,f.jsx)("button",{type:"submit",className:"btn-common",children:"Submit"})]})})]})}}}]);
//# sourceMappingURL=80.07ad0816.chunk.js.map